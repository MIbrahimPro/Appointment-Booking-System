
    <link rel="stylesheet" href="/styles/rating.css">

    <section class="flex flex-col items-center min-h-screen pt-20 pb-8">
        <div class="w-full max-w-lg lg:max-w-4xl p-4 sm:p-6 lg:p-8 flex flex-col items-center">

            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 text-center mb-2">
                Reviews for <%= service.name %>
            </h1>
            <p class="text-gray-600 text-center mb-2 text-lg sm:text-xl">
                <b>By:</b> <%= service.user_id.name %>
            </p>
            <p class="heading-font text-gray-600 text-center mb-8 text-lg sm:text-xl">
                See what others are saying about this service
            </p>

            <!-- Overall Rating Summary -->
            <div class="bg-white rounded-3xl shadow-lg p-6 w-full mb-8 text-center">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Overall Rating</h2>
                <div id="overallRatingDisplay"
                    class="flex items-center justify-center space-x-2 text-3xl font-bold text-yellow-500 mb-2">
                    <% if (averageRating) { %>
                        <i class="fas fa-star"></i>
                        <span>
                            <%= averageRating %>
                        </span>
                        <% } else { %>
                            <i class="far fa-star text-gray-300"></i>
                            <span>N/A</span>
                            <% } %>
                </div>
                <p id="totalReviewsCount" class="text-lg text-gray-600">
                    Based on <%= totalReviews %> review<%= totalReviews===1 ? '' : 's' %>
                </p>
            </div>

            <!-- Reviews Grid -->
            <div id="reviewsGrid" class="grid grid-cols-1 gap-6 w-full">
                <% if (reviews.length===0) { %>
                    <p class="text-center text-gray-600 col-span-full">No reviews yet for this service.</p>
                    <% } else { %>
                        <% reviews.forEach(r=> { %>
                            <div class="bg-white rounded-2xl shadow p-6 review-card">
                                <div class="flex items-center space-x-4 mb-3">
                                    <img src="<%= r.user_id.image %>" alt="<%= r.user_id.name %>"
                                        class="w-10 h-10 rounded-full object-cover review-card-image">
                                    <div>
                                        <h3 class="font-bold text-lg text-gray-900">
                                            <%= r.user_id.name %>
                                        </h3>
                                        <div class="flex items-center space-x-1 review-star-display">
                                            <% for (let i=1; i <=5; i++) { %>
                                                <i
                                                    class="<%= i <= r.rating ? 'fas filled fa-star' : 'far empty fa-star' %>"></i>
                                                <% } %>
                                        </div>
                                    </div>
                                </div>
                                <p class="text-gray-700 mb-3">
                                    <%= r.comment %>
                                </p>
                                <p class="text-sm text-gray-500 text-right">
                                    Reviewed on <%= new Date(r.createdAt).toLocaleDateString('en-US', { year: 'numeric'
                                        , month: 'long' , day: 'numeric' }) %>
                                </p>
                            </div>
                            <% }) %>
                                <% } %>
            </div>

        </div>
    </section>